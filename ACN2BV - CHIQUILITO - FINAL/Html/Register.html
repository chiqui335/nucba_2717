<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuario</title>

    <!-- Enlazar Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <script>
        // Función que muestra los campos según el rol seleccionado
    function mostrarCampos() {
        var role = document.getElementById('role').value;
        var matriculaDiv = document.getElementById('matriculaDiv');
        var especialidadDiv = document.getElementById('especialidadDiv');
        var obraSocialDiv = document.getElementById('obraSocialDiv');
        var carnetDiv = document.getElementById('carnetDiv');
        var fechaNacimientoDiv = document.getElementById('fechaNacimientoDiv');
        var telefonoDiv = document.getElementById('telefonoDiv');
        var direccionDiv = document.getElementById('direccionDiv');
        var nombreDiv = document.getElementById('nombreDiv');
        var apellidoDiv = document.getElementById('apellidoDiv');

        // Ocultamos todos los campos adicionales por defecto y quitamos el atributo 'required'
        matriculaDiv.style.display = 'none';
        especialidadDiv.style.display = 'none';
        obraSocialDiv.style.display = 'none';
        carnetDiv.style.display = 'none';
        fechaNacimientoDiv.style.display = 'none';
        telefonoDiv.style.display = 'none';
        direccionDiv.style.display = 'none';
        nombreDiv.style.display = 'none';
        apellidoDiv.style.display = 'none';

        // Removemos el atributo 'required' de todos los campos ocultos
        document.getElementById('nombre').removeAttribute('required');
        document.getElementById('apellido').removeAttribute('required');
        document.getElementById('matricula').removeAttribute('required');
        document.getElementById('especialidad').removeAttribute('required');
        document.getElementById('fecha_nacimiento').removeAttribute('required');
        document.getElementById('telefono').removeAttribute('required');
        document.getElementById('direccion').removeAttribute('required');
        document.getElementById('OS').removeAttribute('required');
        document.getElementById('cro_credencial').removeAttribute('required');

        // Mostramos los campos correspondientes según el rol y añadimos 'required' solo a los visibles
        if (role === 'psicologo' || role === 'medico' || role === 'kinesiologo') {
            matriculaDiv.style.display = 'block';
            especialidadDiv.style.display = 'block';
            nombreDiv.style.display = 'block';
            apellidoDiv.style.display = 'block';
        
            document.getElementById('nombre').setAttribute('required', 'required');
            document.getElementById('apellido').setAttribute('required', 'required');
            document.getElementById('matricula').setAttribute('required', 'required');
            document.getElementById('especialidad').setAttribute('required', 'required');

        } else if (role === 'paciente') {
            nombreDiv.style.display = 'block';
            apellidoDiv.style.display = 'block';
            fechaNacimientoDiv.style.display = 'block';
            telefonoDiv.style.display = 'block';
            direccionDiv.style.display = 'block';
            obraSocialDiv.style.display = 'block';
            carnetDiv.style.display = 'block';

            document.getElementById('nombre').setAttribute('required', 'required');
            document.getElementById('apellido').setAttribute('required', 'required');
            document.getElementById('fecha_nacimiento').setAttribute('required', 'required');
            document.getElementById('telefono').setAttribute('required', 'required');
            document.getElementById('direccion').setAttribute('required', 'required');
            document.getElementById('OS').setAttribute('required', 'required');
            document.getElementById('cro_credencial').setAttribute('required', 'required');
        }
    }


        // Llamamos a la función al cargar la página para ajustar el formulario inicial
        window.onload = mostrarCampos;
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Registro de Usuario</h1>
        
        <form action="../Php/Registration_Process.php" method="POST">
            <div id="nombreDiv" class="mb-3" style="display:none;">
                <label for="nombre" class="form-label">Nombre:</label>
                <input type="text" class="form-control" id="nombre" name="nombre" required>
            </div>

            <div id="apellidoDiv" class="mb-3" style="display:none;">
                <label for="apellido" class="form-label">Apellido:</label>
                <input type="text" class="form-control" id="apellido" name="apellido" required>
            </div>

            <div class="mb-3">
                <label for="dni" class="form-label">DNI (sin puntos):</label>
                <input type="number" class="form-control" id="dni" name="dni" placeholder="9999999" required>
            </div>

            <div class="mb-3">
                <label for="username" class="form-label">Nombre de Usuario:</label>
                <input type="text" class="form-control" id="username" name="username" required>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Correo Electrónico:</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="alguien@alguien.com" required>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">Contraseña:</label>
                <input type="password" class="form-control" id="password" name="password" required>
            </div>

            <div class="mb-3">
                <label for="role" class="form-label">Seleccione como desea registrarse</label>
                <select id="role" name="role" class="form-select" required onchange="mostrarCampos()">
                    <option value="paciente">Paciente</option>
                    <option value="psicologo">Psicólogo</option>
                    <option value="medico">Médico</option>
                    <option value="kinesiologo">Kinesiólogo</option>
                </select>
            </div>

            <!-- Campos que solo se muestran según el rol -->
            <div id="matriculaDiv" class="mb-3" style="display:none;">
                <label for="matricula" class="form-label">Número de Matrícula:</label>
                <input type="number" class="form-control" id="matricula" name="matricula" placeholder="99999" required>
            </div>

            <div id="especialidadDiv" class="mb-3" style="display:none;">
                <label for="especialidad" class="form-label">Especialidad:</label>
                <input type="text" class="form-control" id="especialidad" name="especialidad" required>
            </div>

            <div id="fechaNacimientoDiv" class="mb-3" style="display:none;">
                <label for="fecha_nacimiento" class="form-label">Fecha de Nacimiento:</label>
                <input type="date" class="form-control" id="fecha_nacimiento" name="fecha_nacimiento" required>
            </div>

            <div id="telefonoDiv" class="mb-3" style="display:none;">
                <label for="telefono" class="form-label">Teléfono:</label>
                <input type="number" class="form-control" id="telefono" name="telefono" required>
            </div>

            <div id="direccionDiv" class="mb-3" style="display:none;">
                <label for="direccion" class="form-label">Dirección:</label>
                <input type="text" class="form-control" id="direccion" name="direccion" required>
            </div>

            <div id="obraSocialDiv" class="mb-3" style="display:none;">
                <label for="OS" class="form-label">Obra Social:</label>
                <input type="text" class="form-control" id="OS" name="OS" required>
            </div>

            <div id="carnetDiv" class="mb-3" style="display:none;">
                <label for="cro_credencial" class="form-label">Número de Carnet:</label>
                <input type="text" class="form-control" id="cro_credencial" name="cro_credencial" required>
            </div>

            <button type="submit" class="btn btn-primary w-100">Registrarse</button>
        </form>
    </div>

    <!-- Enlazar Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>
</html>
